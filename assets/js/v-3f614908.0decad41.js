(self.webpackChunkts_test=self.webpackChunkts_test||[]).push([[288],{4648:(s,a,n)=>{"use strict";n.r(a),n.d(a,{data:()=>p});const p={key:"v-3f614908",path:"/syntax/lexical.html",title:"文法",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"BNF",slug:"bnf",children:[]},{level:2,title:"Token 解析",slug:"token-解析",children:[]},{level:2,title:"注释",slug:"注释",children:[]},{level:2,title:"标识符",slug:"标识符",children:[]},{level:2,title:"Boolean",slug:"boolean",children:[]},{level:2,title:"Number",slug:"number",children:[]},{level:2,title:"Char",slug:"char",children:[]},{level:2,title:"String",slug:"string",children:[]},{level:2,title:"keyword",slug:"keyword",children:[]}],filePathRelative:"syntax/lexical.md",git:{updatedTime:1621610185e3,contributors:[]}}},6415:(s,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>k});var p=n(6252);const e=(0,p.Wm)("h1",{id:"文法"},[(0,p.Wm)("a",{class:"header-anchor",href:"#文法"},"#"),(0,p.Uk)(" 文法")],-1),t=(0,p.Uk)("语法参考 "),o={href:"https://schemers.org/Documents/Standards/R5RS/",target:"_blank",rel:"noopener noreferrer"},r=(0,p.Uk)("R5RS"),l=(0,p.Uk)("， 但并不是完整实现"),c=(0,p.uE)('<h2 id="bnf"><a class="header-anchor" href="#bnf">#</a> BNF</h2><p>使用BNF描述语法</p><p>使用一下拓展语法来简化书写：</p><ul><li><code>&lt;thing&gt;*</code>​ 表示<code>&lt;thing&gt;</code> 重复0次或者多次</li><li><code>&lt;thing&gt;+</code>​ 表示<code>&lt;thing&gt;</code> 出现至少一次</li><li><code>&lt;Any&gt;</code> 表示任意字符</li></ul><h2 id="token-解析"><a class="header-anchor" href="#token-解析">#</a> Token 解析</h2><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token operator">&lt;</span>token<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>identifier<span class="token operator">&gt;</span> <span class="token operator">|</span>  <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> \n              <span class="token operator">|</span> <span class="token operator">&lt;</span>character<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;(&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;)&#39;</span>\n              <span class="token operator">|</span> <span class="token string">&#39;,&#39;</span> <span class="token operator">|</span> <span class="token string">&quot; &#39; &quot;</span> <span class="token operator">|</span> <span class="token string">&#39;.&#39;</span> \n\n<span class="token operator">&lt;</span>delimiter<span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token operator">=</span> <span class="token operator">&lt;</span>whitespace<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;(&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;)&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;&quot;&#39;</span>\n<span class="token operator">&lt;</span>whitespace<span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token operator">=</span> space <span class="token operator">|</span> newline\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="注释"><a class="header-anchor" href="#注释">#</a> 注释</h2><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token operator">&lt;</span>comment<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;;&#39;</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token operator">*</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="标识符"><a class="header-anchor" href="#标识符">#</a> 标识符</h2><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token operator">&lt;</span>identifier<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>initial<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>subsequent<span class="token operator">&gt;</span><span class="token operator">*</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>peculiar identifier<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>initial<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>letter<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>special initial<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>letter<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;a&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;b&#39;</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">|</span> <span class="token string">&#39;z&#39;</span> <span class="token operator">|</span> \n\t\t   <span class="token string">&#39;A&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;B&#39;</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">|</span> <span class="token string">&#39;Z&#39;</span> \n<span class="token operator">&lt;</span>special initial<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;!&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;$&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;%&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;&amp;&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;*&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;/ &#39;</span><span class="token operator">|</span> <span class="token string">&#39;:&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;&lt; &#39;</span><span class="token operator">|</span> <span class="token string">&#39;=&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;&gt;&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;?&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;^&#39;</span><span class="token operator">|</span><span class="token string">&#39;_&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;~&#39;</span>\n\n<span class="token operator">&lt;</span>subsequent<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>initial<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>digit<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>special subsequent<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>digit<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token number">9</span>\n<span class="token operator">&lt;</span>special subsequent<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;+&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;@&#39;</span>\n\n<span class="token operator">&lt;</span>peculiar identifier<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;+&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;...&#39;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>注意peculiar identifier指 <code>+</code>,<code>-</code>,<code>...</code>不是省略号</p><h2 id="boolean"><a class="header-anchor" href="#boolean">#</a> Boolean</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;boolean&gt; ::= #t | #f\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="number"><a class="header-anchor" href="#number">#</a> Number</h2><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>num <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>num <span class="token number">8</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>num <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>num <span class="token number">16</span><span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>num R<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>prefix R<span class="token operator">&gt;</span><span class="token operator">&lt;</span>complex R<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>complex R<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token string">&#39;@&#39;</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span>\n\t\t\t<span class="token operator">|</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token string">&#39;+&#39;</span> <span class="token operator">&lt;</span>ureal R<span class="token operator">&gt;</span> <span class="token string">&#39;i&#39;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">&lt;</span>ureal R<span class="token operator">&gt;</span><span class="token string">&#39;i&#39;</span>\n\t\t\t<span class="token operator">|</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token string">&#39;+&#39;</span> <span class="token string">&#39;i&#39;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token string">&#39;-&#39;</span> <span class="token string">&#39;i&#39;</span>\n\t\t\t<span class="token comment">//| &#39;+&#39; &lt;ureal R&gt; &#39;i&#39; | &#39;-&#39; &lt;ureal R&gt; &#39;i&#39;</span>\n\n<span class="token operator">&lt;</span>real R<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>sign<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>ureal R<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>sign<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>empty<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;+&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;-&#39;</span>\n<span class="token operator">&lt;</span>ureal R<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>uinteger R<span class="token operator">&gt;</span> \n\t\t\t<span class="token operator">|</span><span class="token operator">&lt;</span>uinteger R<span class="token operator">&gt;</span>  <span class="token string">&#39;/&#39;</span>  <span class="token operator">&lt;</span>uinteger R<span class="token operator">&gt;</span> \n\t\t\t<span class="token operator">|</span><span class="token operator">&lt;</span>decimal R<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>uinteger R<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>digit R<span class="token operator">&gt;</span><span class="token operator">+</span>\n<span class="token operator">&lt;</span>decimal <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>uinteger <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>suffix<span class="token operator">&gt;</span> \n    \t\t\t<span class="token operator">|</span> <span class="token operator">&lt;</span>digit <span class="token number">10</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token string">&#39;.&#39;</span><span class="token operator">&lt;</span>digit R<span class="token operator">&gt;</span><span class="token operator">+</span> <span class="token operator">&lt;</span>suffix<span class="token operator">&gt;</span> \n    \t\t<span class="token comment">// | &#39;.&#39;&lt;digit 10&gt;+ &lt;suffix&gt; </span>\n    \t\t<span class="token comment">// | &lt;digit 10&gt;+&#39;.&#39;&lt;digit R&gt;* &lt;suffix&gt; </span>\n<span class="token operator">&lt;</span>suffix<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>empty<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;e&#39;</span> <span class="token operator">&lt;</span>sign<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>digit <span class="token number">10</span><span class="token operator">&gt;</span><span class="token operator">+</span>\n    \n<span class="token operator">&lt;</span>prefix R<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>radix R<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>exactness<span class="token operator">&gt;</span> \n    \t\t<span class="token operator">|</span> <span class="token operator">&lt;</span>exactness<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>radix R<span class="token operator">&gt;</span> \n<span class="token operator">&lt;</span>exactness<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>empty<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;#i&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;#e&#39;</span>\n<span class="token operator">&lt;</span>radix <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;#b&#39;</span>\n<span class="token operator">&lt;</span>radix <span class="token number">8</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;#o&#39;</span>\n<span class="token operator">&lt;</span>radix <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;#d&#39;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>empty<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>radix <span class="token number">16</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;#x&#39;</span>\n<span class="token operator">&lt;</span>digit <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span>  <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span>\n<span class="token operator">&lt;</span>digit <span class="token number">8</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span>  <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">7</span> \n<span class="token operator">&lt;</span>digit <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>digit<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>digit <span class="token number">16</span><span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token operator">&lt;</span>digit <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token string">&#39;a&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;b&#39;</span> <span class="token operator">|</span>  <span class="token string">&#39;c&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;d&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;e&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;f&#39;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>删除了r5rs里面 <code>#</code>当0的用法和 除了e之外的后缀</p><p>scheme 的数字系统比较复杂，分为四类</p><ul><li>complex 复数</li><li>real 实数</li><li>rational 有理数</li><li>integer 整数</li></ul><p>其中，整数和有理数是精确的<code>#e</code>,其他是不精确的<code>#i</code></p><p>精确数之间的运算保证结果仍然是精确的，有不精确数参与的运算最后是不精确的</p><p>FIXME:这里有问题, 如何表示实数 比如 sqrt(#e4) = #e2 sqrt(#e3) = 1.7xxxx</p><h2 id="char"><a class="header-anchor" href="#char">#</a> Char</h2><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token operator">&lt;</span>character<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> #\\ <span class="token operator">&lt;</span>any character<span class="token operator">&gt;</span> \n    \t\t  <span class="token operator">|</span>#\\ <span class="token operator">&lt;</span>character name<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>character name<span class="token operator">&gt;</span> <span class="token operator">::</span><span class="token operator">=</span> <span class="token string">&#39;space&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;newline&#39;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="string"><a class="header-anchor" href="#string">#</a> String</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;string&gt; ::= &quot; &lt;string element&gt;* &quot;\n&lt;string element&gt; ::= 除了&quot;和\\之外的所有字符\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="keyword"><a class="header-anchor" href="#keyword">#</a> keyword</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>quote | lambda | if | set | begin | cond | and | or | case | let | let* | letrec | do | delay | quasiquote | else | =&gt; | define | unquote | unquote-splicing\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',27),k={render:function(s,a){const n=(0,p.up)("OutboundLink");return(0,p.wg)(),(0,p.j4)(p.HY,null,[e,(0,p.Wm)("p",null,[t,(0,p.Wm)("a",o,[r,(0,p.Wm)(n)]),l]),c],64)}}}}]);